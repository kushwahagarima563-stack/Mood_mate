(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45],{871:function(e,t,a){Promise.resolve().then(a.bind(a,2294))},2294:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return h}});var r=a(7437),s=a(2265),l=a(9205);let n=(0,l.Z)("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]),o=(0,l.Z)("camera",[["path",{d:"M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z",key:"18u6gg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),i=(0,l.Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]),d=(0,l.Z)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var c=a(9322);let m={happiness:"from-yellow-400 to-orange-400",sadness:"from-blue-400 to-indigo-500",anger:"from-red-400 to-pink-500",surprise:"from-purple-400 to-pink-400",fear:"from-gray-400 to-slate-500",disgust:"from-green-400 to-teal-500",neutral:"from-gray-300 to-gray-400"},u={happiness:"\uD83D\uDE0A",sadness:"\uD83D\uDE22",anger:"\uD83D\uDE20",surprise:"\uD83D\uDE32",fear:"\uD83D\uDE28",disgust:"\uD83E\uDD22",neutral:"\uD83D\uDE10"};function h(){let[e,t]=(0,s.useState)(null),[a,l]=(0,s.useState)(!1),[h,x]=(0,s.useState)([]),[p,g]=(0,s.useState)(null),[f,y]=(0,s.useState)(!1),[b,v]=(0,s.useState)(null),j=(0,s.useRef)(null),N=(0,s.useRef)(null),w=(0,s.useRef)(null),k=async()=>{try{let e=await navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}});v(e),j.current&&(j.current.srcObject=e),y(!0),g(null)}catch(e){g("Failed to access camera. Please grant camera permissions."),console.error("Camera error:",e)}},D=()=>{b&&(b.getTracks().forEach(e=>e.stop()),v(null)),y(!1)},C=async e=>{l(!0),g(null),x([]);try{let t=e.split(",")[1],a=await fetch("data:image/jpeg;base64,".concat(t)).then(e=>e.blob()),r=new FormData;r.append("photo",a,"photo.jpg");let s=await fetch("/api/emotion",{method:"POST",body:r});if(!s.ok)throw Error("Failed to analyze emotion");let l=await s.json();if(l.faces&&l.faces.length>0){let e=l.faces.map(e=>({emotions:{happiness:e.emotion.happy,sadness:e.emotion.sad,anger:e.emotion.angry,surprise:e.emotion.surprise,fear:e.emotion.fear,disgust:e.emotion.disgust,neutral:e.emotion.neutral},age:e.age||0,gender:e.gender||"unknown"}));x(e)}else g("No faces detected. Try another photo.")}catch(e){console.error(e),g(e.message||"Failed to analyze emotion")}finally{l(!1)}},E=e=>Object.entries(e).sort((e,t)=>t[1]-e[1])[0],A=()=>{t(null),x([]),g(null),D()};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-pink-50 to-blue-50 py-12 px-4",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-12",children:[(0,r.jsx)("div",{className:"inline-block bg-gradient-to-r from-purple-600 to-pink-600 p-4 rounded-3xl shadow-lg mb-4",children:(0,r.jsx)(n,{className:"w-12 h-12 text-white"})}),(0,r.jsx)("h1",{className:"text-5xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-4",children:"Emotion Recognition"}),(0,r.jsx)("p",{className:"text-gray-600 text-lg max-w-2xl mx-auto",children:"Upload a photo or take a selfie to detect emotions using AI-powered facial analysis"})]}),(0,r.jsx)("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:e||f?f?(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"relative rounded-2xl overflow-hidden bg-black",children:[(0,r.jsx)("video",{ref:j,autoPlay:!0,playsInline:!0,className:"w-full"}),(0,r.jsx)("canvas",{ref:N,className:"hidden"})]}),(0,r.jsxs)("div",{className:"flex gap-4 justify-center mt-6",children:[(0,r.jsxs)("button",{onClick:()=>{if(j.current&&N.current){let e=j.current,a=N.current,r=a.getContext("2d");if(a.width=e.videoWidth,a.height=e.videoHeight,r){r.drawImage(e,0,0,a.width,a.height);let s=a.toDataURL("image/jpeg");t(s),D(),C(s)}}},className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-4 px-8 rounded-xl shadow-lg transform transition hover:scale-105",children:[(0,r.jsx)(o,{className:"inline w-5 h-5 mr-2"}),"Capture Photo"]}),(0,r.jsxs)("button",{onClick:D,className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-bold py-4 px-8 rounded-xl shadow-lg transform transition hover:scale-105",children:[(0,r.jsx)(d,{className:"inline w-5 h-5 mr-2"}),"Cancel"]})]})]}):(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsxs)("div",{className:"relative mb-6",children:[(0,r.jsx)("img",{src:e,alt:"Uploaded",className:"w-full max-h-96 object-contain rounded-2xl"}),(0,r.jsx)("button",{onClick:A,className:"absolute top-4 right-4 bg-white hover:bg-gray-100 text-gray-700 p-3 rounded-full shadow-lg transition",children:(0,r.jsx)(d,{className:"w-6 h-6"})})]}),a&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center py-12",children:[(0,r.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-purple-600 mb-4"}),(0,r.jsx)("p",{className:"text-gray-600 font-medium",children:"Analyzing emotions..."})]}),p&&(0,r.jsx)("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(c.Z,{className:"w-6 h-6 text-red-500"}),(0,r.jsx)("p",{className:"text-red-700 font-medium",children:p})]})}),h.length>0&&(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold text-gray-800 text-center mb-6",children:"Detected Emotions"}),h.map((e,t)=>{let[a,s]=E(e.emotions),l=Object.entries(e.emotions).sort((e,t)=>t[1]-e[1]);return(0,r.jsxs)("div",{className:"bg-gradient-to-br from-gray-50 to-white rounded-2xl p-8 shadow-lg",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("div",{className:"inline-block bg-gradient-to-r ".concat(m[a]," p-6 rounded-3xl shadow-lg mb-4"),children:(0,r.jsx)("span",{className:"text-6xl",children:u[a]})}),(0,r.jsx)("h3",{className:"text-3xl font-bold text-gray-800 capitalize mb-2",children:a}),(0,r.jsxs)("p",{className:"text-gray-600 text-lg",children:["Dominant Emotion: ",(100*s).toFixed(1),"%"]}),e.age&&(0,r.jsxs)("p",{className:"text-gray-500 mt-2",children:["Estimated Age: ",Math.round(e.age)," • Gender: ",e.gender]})]}),(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)("h4",{className:"text-xl font-bold text-gray-700 mb-4",children:"All Detected Emotions:"}),l.map(e=>{let[t,a]=e;return(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"text-2xl",children:u[t]}),(0,r.jsx)("span",{className:"font-medium capitalize text-gray-700",children:t})]}),(0,r.jsxs)("span",{className:"font-bold text-gray-800",children:[(100*a).toFixed(1),"%"]})]}),(0,r.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-gradient-to-r ".concat(m[t]," rounded-full transition-all duration-500"),style:{width:"".concat(100*a,"%")}})})]},t)})]})]},t)}),(0,r.jsx)("div",{className:"text-center",children:(0,r.jsx)("button",{onClick:A,className:"bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-bold py-4 px-12 rounded-xl shadow-lg transform transition hover:scale-105",children:"Try Another Photo"})})]})]}):(0,r.jsxs)("div",{className:"p-12",children:[(0,r.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[(0,r.jsxs)("button",{onClick:k,className:"group relative bg-gradient-to-br from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-2xl p-8 shadow-lg transition-all transform hover:scale-105",children:[(0,r.jsx)(o,{className:"w-16 h-16 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"Take Photo"}),(0,r.jsx)("p",{className:"text-purple-100",children:"Use your camera"})]}),(0,r.jsxs)("button",{onClick:()=>{var e;return null===(e=w.current)||void 0===e?void 0:e.click()},className:"group relative bg-gradient-to-br from-blue-500 to-indigo-500 hover:from-blue-600 hover:to-indigo-600 text-white rounded-2xl p-8 shadow-lg transition-all transform hover:scale-105",children:[(0,r.jsx)(i,{className:"w-16 h-16 mx-auto mb-4"}),(0,r.jsx)("h3",{className:"text-2xl font-bold mb-2",children:"Upload Photo"}),(0,r.jsx)("p",{className:"text-blue-100",children:"Choose from device"})]})]}),(0,r.jsx)("input",{ref:w,type:"file",accept:"image/*",onChange:e=>{var a;let r=null===(a=e.target.files)||void 0===a?void 0:a[0];if(r){let e=new FileReader;e.onload=e=>{var a;let r=null===(a=e.target)||void 0===a?void 0:a.result;t(r),C(r)},e.readAsDataURL(r)}},className:"hidden"})]})}),(0,r.jsxs)("div",{className:"mt-12 text-center text-gray-600",children:[(0,r.jsx)("p",{className:"mb-2",children:"Powered by Luxand Cloud API • AI Facial Analysis"}),(0,r.jsx)("p",{className:"text-sm",children:"Your photos are processed securely and not stored on our servers"})]})]})})}},9205:function(e,t,a){"use strict";a.d(t,{Z:function(){return m}});var r=a(2265);let s=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),n=e=>{let t=l(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},i=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var d={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let c=(0,r.forwardRef)((e,t)=>{let{color:a="currentColor",size:s=24,strokeWidth:l=2,absoluteStrokeWidth:n,className:c="",children:m,iconNode:u,...h}=e;return(0,r.createElement)("svg",{ref:t,...d,width:s,height:s,stroke:a,strokeWidth:n?24*Number(l)/Number(s):l,className:o("lucide",c),...!m&&!i(h)&&{"aria-hidden":"true"},...h},[...u.map(e=>{let[t,a]=e;return(0,r.createElement)(t,a)}),...Array.isArray(m)?m:[m]])}),m=(e,t)=>{let a=(0,r.forwardRef)((a,l)=>{let{className:i,...d}=a;return(0,r.createElement)(c,{ref:l,iconNode:t,className:o("lucide-".concat(s(n(e))),"lucide-".concat(e),i),...d})});return a.displayName=n(e),a}},9322:function(e,t,a){"use strict";a.d(t,{Z:function(){return r}});let r=(0,a(9205).Z)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])}},function(e){e.O(0,[971,117,744],function(){return e(e.s=871)}),_N_E=e.O()}]);