(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[404],{3839:function(e,t,a){Promise.resolve().then(a.bind(a,9976))},9976:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return f}});var l=a(7437),i=a(2265),s=a(9205);let r=(0,s.Z)("sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),o=(0,s.Z)("cloud",[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]]),n=(0,s.Z)("cloud-rain",[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]]),c=(0,s.Z)("wind",[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]]),d=(0,s.Z)("music",[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]]),h=(0,s.Z)("skip-back",[["path",{d:"M17.971 4.285A2 2 0 0 1 21 6v12a2 2 0 0 1-3.029 1.715l-9.997-5.998a2 2 0 0 1-.003-3.432z",key:"15892j"}],["path",{d:"M3 20V4",key:"1ptbpl"}]]),u=(0,s.Z)("pause",[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]]),m=(0,s.Z)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),p=(0,s.Z)("skip-forward",[["path",{d:"M21 4v16",key:"7j8fe9"}],["path",{d:"M6.029 4.285A2 2 0 0 0 3 6v12a2 2 0 0 0 3.029 1.715l9.997-5.998a2 2 0 0 0 .003-3.432z",key:"zs4d6"}]]);var x=a(8997);let g=e=>({insert:async e=>{console.log("Logging to Supabase:",e);try{await fetch("/api/musiclogs",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e[0])})}catch(e){console.error("Error logging:",e)}return{data:e,error:null}}}),v=[{value:"happy",label:"Happy",emoji:"\uD83D\uDE0A",color:"from-yellow-400 to-orange-400"},{value:"sad",label:"Sad",emoji:"\uD83D\uDE22",color:"from-blue-400 to-indigo-500"},{value:"angry",label:"Angry",emoji:"\uD83D\uDE24",color:"from-red-400 to-pink-500"},{value:"neutral",label:"Neutral",emoji:"\uD83D\uDE10",color:"from-gray-400 to-slate-500"},{value:"excited",label:"Excited",emoji:"\uD83E\uDD29",color:"from-purple-400 to-pink-500"},{value:"relaxed",label:"Relaxed",emoji:"\uD83D\uDE0C",color:"from-green-400 to-teal-500"}],y={clear:(0,l.jsx)(r,{className:"w-6 h-6"}),clouds:(0,l.jsx)(o,{className:"w-6 h-6"}),rain:(0,l.jsx)(n,{className:"w-6 h-6"}),default:(0,l.jsx)(c,{className:"w-6 h-6"})};function f(){let[e,t]=(0,i.useState)("neutral"),[a,s]=(0,i.useState)("clear"),[r,o]=(0,i.useState)([]),[n,c]=(0,i.useState)(!1),[f,w]=(0,i.useState)(null),[j,b]=(0,i.useState)(!1),[N,k]=(0,i.useState)(new Set);async function M(){try{let e=await new Promise((e,t)=>navigator.geolocation.getCurrentPosition(e,t)),t=e.coords.latitude,a=e.coords.longitude,l=await fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(t,"&lon=").concat(a,"&appid=YOUR_API_KEY&units=metric")),i=(await l.json()).weather[0].main.toLowerCase();return s(i),i}catch(e){return console.error("Weather error:",e),s("clear"),"clear"}}async function C(e){c(!0);try{var t;let a=await fetch("/api/youtube?q=".concat(encodeURIComponent(e))),l=await a.json(),i=(null===(t=l.items)||void 0===t?void 0:t.map(e=>({title:e.snippet.title,videoId:e.id.videoId,thumbnail:e.snippet.thumbnails.medium.url})))||[];o(i),i.length>0&&!f&&w(i[0])}catch(e){console.error("Error fetching songs:",e)}c(!1)}async function I(t){await g("music_logs").insert([{emotion:e,weather:a,song_title:t.title,song_id:t.videoId,played_at:new Date().toISOString()}])}let D=e=>{w(e),b(!0),I(e)},E=e=>{let t=new Set(N);t.has(e)?t.delete(e):t.add(e),k(t)};(0,i.useEffect)(()=>{M()},[]);let S=async()=>{let t="happy"===e&&"clear"===a?"happy upbeat summer songs":"sad"===e&&"rain"===a?"sad rainy lo fi chill":"angry"===e?"calming instrumental music":"neutral"===e&&"clouds"===a?"chill ambient music":"".concat(e," ").concat(a," mood music");await C(t)},Z=v.find(t=>t.value===e);return(0,l.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50",children:[(0,l.jsx)("div",{className:"bg-white/80 backdrop-blur-lg shadow-lg sticky top-0 z-50",children:(0,l.jsxs)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[(0,l.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("div",{className:"bg-gradient-to-br from-indigo-500 to-purple-600 p-3 rounded-2xl shadow-lg",children:(0,l.jsx)(d,{className:"w-8 h-8 text-white"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold bg-gradient-to-r from-indigo-600 to-purple-600 bg-clip-text text-transparent",children:"Mood Music"}),(0,l.jsx)("p",{className:"text-sm text-gray-500",children:"Music that matches your vibe"})]})]}),(0,l.jsxs)("div",{className:"flex items-center gap-2 bg-gradient-to-r from-blue-50 to-indigo-50 px-4 py-2 rounded-xl",children:[(0,l.jsx)("div",{className:"text-indigo-600",children:y[a]||y.default}),(0,l.jsx)("span",{className:"font-semibold text-gray-700 capitalize",children:a})]})]}),(0,l.jsx)("div",{className:"flex flex-wrap gap-3 justify-center",children:v.map(a=>(0,l.jsxs)("button",{onClick:()=>t(a.value),className:"px-6 py-3 rounded-xl font-medium transition-all transform hover:scale-105 ".concat(e===a.value?"bg-gradient-to-r ".concat(a.color," text-white shadow-lg"):"bg-white text-gray-700 hover:bg-gray-50 shadow"),children:[(0,l.jsx)("span",{className:"mr-2",children:a.emoji}),a.label]},a.value))}),(0,l.jsxs)("button",{onClick:S,className:"mt-4 w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 text-white font-bold py-4 px-8 rounded-xl shadow-lg transform transition hover:scale-105",children:[(0,l.jsx)(d,{className:"inline w-5 h-5 mr-2"}),"Discover Music"]})]})}),f&&(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-6 py-6",children:(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl overflow-hidden",children:[(0,l.jsxs)("div",{className:"grid md:grid-cols-2 gap-6 p-6",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("img",{src:f.thumbnail,alt:f.title,className:"w-full aspect-video object-cover rounded-2xl shadow-lg"}),(0,l.jsxs)("div",{className:"absolute top-4 right-4 bg-gradient-to-r ".concat(null==Z?void 0:Z.color," px-4 py-2 rounded-full text-white font-semibold shadow-lg"),children:[null==Z?void 0:Z.emoji," ",null==Z?void 0:Z.label]})]}),(0,l.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-2 line-clamp-2",children:f.title}),(0,l.jsx)("p",{className:"text-gray-500 mb-4",children:"Now Playing"})]}),(0,l.jsxs)("div",{className:"space-y-4",children:[(0,l.jsxs)("div",{className:"flex items-center justify-center gap-4",children:[(0,l.jsx)("button",{onClick:()=>{let e=r.findIndex(e=>e.videoId===(null==f?void 0:f.videoId));e>0&&D(r[e-1])},className:"bg-gray-100 hover:bg-gray-200 p-4 rounded-full transition",children:(0,l.jsx)(h,{className:"w-6 h-6 text-gray-700"})}),(0,l.jsx)("button",{onClick:()=>b(!j),className:"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700 p-6 rounded-full shadow-lg transition transform hover:scale-110",children:j?(0,l.jsx)(u,{className:"w-8 h-8 text-white"}):(0,l.jsx)(m,{className:"w-8 h-8 text-white ml-1"})}),(0,l.jsx)("button",{onClick:()=>{let e=r.findIndex(e=>e.videoId===(null==f?void 0:f.videoId));e<r.length-1&&D(r[e+1])},className:"bg-gray-100 hover:bg-gray-200 p-4 rounded-full transition",children:(0,l.jsx)(p,{className:"w-6 h-6 text-gray-700"})})]}),(0,l.jsxs)("button",{onClick:()=>E(f.videoId),className:"w-full flex items-center justify-center gap-2 py-3 rounded-xl bg-pink-50 hover:bg-pink-100 transition",children:[(0,l.jsx)(x.Z,{className:"w-5 h-5 ".concat(N.has(f.videoId)?"fill-pink-500 text-pink-500":"text-gray-400")}),(0,l.jsx)("span",{className:"font-medium text-gray-700",children:N.has(f.videoId)?"Liked":"Like"})]})]})]})]}),(0,l.jsx)("div",{className:"px-6 pb-6",children:(0,l.jsx)("iframe",{width:"100%",height:"400",src:"https://www.youtube.com/embed/".concat(f.videoId,"?autoplay=").concat(j?1:0),allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,className:"rounded-2xl shadow-lg"})})]})}),(0,l.jsx)("div",{className:"max-w-7xl mx-auto px-6 pb-12",children:n?(0,l.jsxs)("div",{className:"flex flex-col items-center justify-center py-20",children:[(0,l.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-4 border-indigo-600 mb-4"}),(0,l.jsx)("p",{className:"text-gray-600 font-medium",children:"Finding perfect tracks..."})]}):0===r.length?(0,l.jsxs)("div",{className:"text-center py-20",children:[(0,l.jsx)(d,{className:"w-20 h-20 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("p",{className:"text-gray-500 text-lg",children:"Select your mood to discover music"})]}):(0,l.jsxs)("div",{children:[(0,l.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-6",children:"Recommended Tracks"}),(0,l.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:r.map(e=>(0,l.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden transition-all transform hover:scale-105 hover:shadow-2xl cursor-pointer ".concat((null==f?void 0:f.videoId)===e.videoId?"ring-4 ring-indigo-500":""),onClick:()=>D(e),children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("img",{src:e.thumbnail,alt:e.title,className:"w-full aspect-video object-cover"}),(0,l.jsx)("div",{className:"absolute inset-0 bg-black bg-opacity-0 hover:bg-opacity-30 transition-all flex items-center justify-center",children:(0,l.jsx)(m,{className:"w-12 h-12 text-white opacity-0 hover:opacity-100 transition-opacity"})}),(0,l.jsx)("button",{onClick:t=>{t.stopPropagation(),E(e.videoId)},className:"absolute top-2 right-2 bg-white/90 p-2 rounded-full hover:bg-white transition",children:(0,l.jsx)(x.Z,{className:"w-5 h-5 ".concat(N.has(e.videoId)?"fill-pink-500 text-pink-500":"text-gray-400")})})]}),(0,l.jsx)("div",{className:"p-4",children:(0,l.jsx)("p",{className:"font-medium text-gray-800 line-clamp-2 text-sm",children:e.title})})]},e.videoId))})]})})]})}},9205:function(e,t,a){"use strict";a.d(t,{Z:function(){return h}});var l=a(2265);let i=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),s=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,a)=>a?a.toUpperCase():t.toLowerCase()),r=e=>{let t=s(e);return t.charAt(0).toUpperCase()+t.slice(1)},o=function(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter((e,t,a)=>!!e&&""!==e.trim()&&a.indexOf(e)===t).join(" ").trim()},n=e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};var c={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let d=(0,l.forwardRef)((e,t)=>{let{color:a="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:r,className:d="",children:h,iconNode:u,...m}=e;return(0,l.createElement)("svg",{ref:t,...c,width:i,height:i,stroke:a,strokeWidth:r?24*Number(s)/Number(i):s,className:o("lucide",d),...!h&&!n(m)&&{"aria-hidden":"true"},...m},[...u.map(e=>{let[t,a]=e;return(0,l.createElement)(t,a)}),...Array.isArray(h)?h:[h]])}),h=(e,t)=>{let a=(0,l.forwardRef)((a,s)=>{let{className:n,...c}=a;return(0,l.createElement)(d,{ref:s,iconNode:t,className:o("lucide-".concat(i(r(e))),"lucide-".concat(e),n),...c})});return a.displayName=r(e),a}},8997:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});let l=(0,a(9205).Z)("heart",[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]])}},function(e){e.O(0,[971,117,744],function(){return e(e.s=3839)}),_N_E=e.O()}]);