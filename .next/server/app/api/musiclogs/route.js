"use strict";(()=>{var e={};e.id=778,e.ids=[778],e.modules={53524:e=>{e.exports=require("@prisma/client")},20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},19914:(e,t,s)=>{s.r(t),s.d(t,{originalPathname:()=>x,patchFetch:()=>f,requestAsyncStorage:()=>g,routeModule:()=>p,serverHooks:()=>h,staticGenerationAsyncStorage:()=>m});var r={};s.r(r),s.d(r,{DELETE:()=>d,GET:()=>l,POST:()=>c});var o=s(49303),a=s(88716),i=s(60670),n=s(87070);let u=new(s(53524)).PrismaClient;async function c(e){try{let{emotion:t,weather:s,song_title:r,song_id:o,played_at:a}=await e.json();if(!t||!s||!r||!o)return n.NextResponse.json({error:"Missing required fields: emotion, weather, song_title, song_id"},{status:400});let i=await u.musicLog.create({data:{emotion:t,weather:s,song_title:r,song_id:o,played_at:a?new Date(a):new Date}});return n.NextResponse.json({success:!0,data:i,message:"Music log created successfully"},{status:201})}catch(e){return console.error("Error creating music log:",e),n.NextResponse.json({error:"Failed to create music log",details:e.message},{status:500})}}async function l(e){try{let{searchParams:t}=new URL(e.url),s=t.get("emotion"),r=t.get("weather"),o=parseInt(t.get("limit")||"50"),a={};s&&(a.emotion=s),r&&(a.weather=r);let i=await u.musicLog.findMany({where:a,orderBy:{played_at:"desc"},take:o});return n.NextResponse.json({success:!0,count:i.length,data:i},{status:200})}catch(e){return console.error("Error fetching music logs:",e),n.NextResponse.json({error:"Failed to fetch music logs",details:e.message},{status:500})}}async function d(e){try{let{searchParams:t}=new URL(e.url),s=t.get("id");if(!s)return n.NextResponse.json({error:"Missing required parameter: id"},{status:400});let r=await u.musicLog.delete({where:{id:s}});return n.NextResponse.json({success:!0,data:r,message:"Music log deleted successfully"},{status:200})}catch(e){return console.error("Error deleting music log:",e),n.NextResponse.json({error:"Failed to delete music log",details:e.message},{status:500})}}let p=new o.AppRouteRouteModule({definition:{kind:a.x.APP_ROUTE,page:"/api/musiclogs/route",pathname:"/api/musiclogs",filename:"route",bundlePath:"app/api/musiclogs/route"},resolvedPagePath:"C:\\Users\\Garima\\Desktop\\Mood_mate\\app\\api\\musiclogs\\route.ts",nextConfigOutput:"",userland:r}),{requestAsyncStorage:g,staticGenerationAsyncStorage:m,serverHooks:h}=p,x="/api/musiclogs/route";function f(){return(0,i.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:m})}}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[276,972],()=>s(19914));module.exports=r})();